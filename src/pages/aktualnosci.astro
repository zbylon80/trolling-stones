---
import Layout from "@components/Layout.astro";
import { news } from "../data/news";

const facebookPageUrl = "https://www.facebook.com/stones3city";

const sortedNews = [...news].sort((a, b) => (a.date < b.date ? 1 : a.date > b.date ? -1 : 0));
---

<Layout title="Aktualności - TRolling Stones">
  <section class="container py-12">
    <h1 class="text-3xl font-bold">Aktualności</h1>
    <p class="mt-2 max-w-2xl text-neutral-300">
      Bądź na bieżąco z koncertami, premierami i kulisami TRolling Stones.
    </p>

    <div class="mt-8 grid gap-8 lg:grid-cols-[minmax(0,1fr)_minmax(0,420px)]">
      <div class="space-y-6">
        {sortedNews.map((item) => (
          <article class="rounded-xl border border-neutral-800 bg-black/60 p-6 shadow-lg shadow-black/20 backdrop-blur">
            <time datetime={item.date} class="text-xs font-semibold uppercase tracking-widest text-neutral-400">
              {new Date(`${item.date}T00:00:00Z`).toLocaleDateString("pl-PL", {
                day: "2-digit",
                month: "long",
                year: "numeric"
              })}
            </time>
            <h2 class="mt-2 text-xl font-semibold text-white">{item.title}</h2>
            <p class="mt-3 leading-relaxed text-neutral-300">{item.summary}</p>
            {item.links && (
              <div class="mt-4 flex flex-wrap gap-3">
                {item.links.map((link) => (
                  <a
                    class="inline-flex items-center gap-2 rounded-md border border-neutral-700 px-3 py-2 text-sm text-neutral-100 transition hover:border-neutral-500 hover:text-white"
                    href={link.url}
                    target="_blank"
                    rel="noopener"
                  >
                    {link.label}
                    <span aria-hidden="true">&rarr;</span>
                  </a>
                ))}
              </div>
            )}
          </article>
        ))}

        {sortedNews.length === 0 && (
          <div class="rounded-lg border border-dashed border-neutral-700 p-6 text-neutral-400">
            Na razie brak nowych informacji. Zaglądaj do nas ponownie!
          </div>
        )}
      </div>

      <aside class="space-y-4 rounded-xl border border-neutral-800 bg-black/60 p-6 shadow-lg shadow-black/20 backdrop-blur">
        <div>
          <h2 class="text-lg font-semibold text-white">Śledź nas na Facebooku</h2>
          <p class="mt-2 text-sm text-neutral-300">
            Facebook pokazuje najświeższe zapowiedzi koncertów i materiały zza kulis. Kliknij przycisk poniżej, aby otworzyć profil w nowej karcie.
          </p>
        </div>
        <a
          class="inline-flex w-full items-center justify-center gap-2 rounded-md bg-brand-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-brand-500"
          href={facebookPageUrl}
          target="_blank"
          rel="noopener"
        >
          Przejdź na Facebooka
          <span aria-hidden="true">&rarr;</span>
        </a>
      </aside>
    </div>
  </section>
</Layout>
